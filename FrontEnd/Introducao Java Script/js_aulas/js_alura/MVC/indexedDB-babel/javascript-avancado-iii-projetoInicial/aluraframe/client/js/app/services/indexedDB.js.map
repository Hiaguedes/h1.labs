{"version":3,"sources":["../../app-es6/services/indexedDB.js"],"names":["openRequest","window","indexedDB","open","connection","onupgradeneeded","console","log","minhaConnection","e","target","result","objectStoreNames","contains","deleteObjectStore","createObjectStore","autoIncrement","onsuccess","onerror","error","adiciona","transaction","store","objectStore","negociacao","Negociacao","Date","request","add","listaDados","cursor","openCursor","negociacoes","atual","dado","value","push","_data","_quantidade","_valor","continue","name"],"mappings":";;AAAA,IAAIA,cAAcC,OAAOC,SAAP,CAAiBC,IAAjB,CAAsB,YAAtB,EAAmC,CAAnC,CAAlB;AACA,IAAIC,UAAJ;;AAEAJ,YAAYK,eAAZ,GAA8B,aAAK;AAC/BC,YAAQC,GAAR,CAAY,yCAAZ;AACA,QAAIC,kBAAkBC,EAAEC,MAAF,CAASC,MAA/B;;AAEA,QAAIH,gBAAgBI,gBAAhB,CAAiCC,QAAjC,CAA0C,aAA1C,CAAJ,EAA6D;AACzDL,wBAAgBM,iBAAhB,CAAkC,aAAlC;AACH;;AAEDN,oBAAgBO,iBAAhB,CAAkC,aAAlC,EAAgD,EAACC,eAAe,IAAhB,EAAhD;AACH,CATD;;AAWAhB,YAAYiB,SAAZ,GAAwB,aAAI;AACxBb,iBAAaK,EAAEC,MAAF,CAASC,MAAtB;AACA;AACH,CAHD;;AAKAX,YAAYkB,OAAZ,GAAsB,aAAI;AACtBZ,YAAQC,GAAR,CAAYE,EAAEC,MAAF,CAASS,KAArB;AACH,CAFD;;AAIA,IAAMC,WAAW,SAAXA,QAAW,GAAM;AACnB,QAAIC,cAAcjB,WAAWiB,WAAX,CAAuB,CAAC,aAAD,CAAvB,EAAwC,WAAxC,CAAlB;AACA,QAAIC,QAAQD,YAAYE,WAAZ,CAAwB,aAAxB,CAAZ;AACA,QAAIC,aAAa,IAAIC,UAAJ,CAAe,IAAIC,IAAJ,EAAf,EAA0B,CAA1B,EAA4B,GAA5B,CAAjB;AACA,QAAIC,UAAUL,MAAMM,GAAN,CAAUJ,UAAV,CAAd;AACAG,YAAQV,SAAR,GAAoB,aAAK;AACrBX,gBAAQC,GAAR,CAAY,qBAAZ;AACH,KAFD;;AAIAoB,YAAQT,OAAR,GAAkB,aAAK;AACnBZ,gBAAQC,GAAR,CAAY,yBAAZ;AACH,KAFD;AAGH,CAZD;;AAcA,IAAMsB,aAAa,SAAbA,UAAa,GAAM;AACrB,QAAIR,cAAcjB,WAAWiB,WAAX,CAAuB,CAAC,aAAD,CAAvB,EAAwC,WAAxC,CAAlB;AACA,QAAIC,QAAQD,YAAYE,WAAZ,CAAwB,aAAxB,CAAZ;AACA,QAAIO,SAASR,MAAMS,UAAN,EAAb;AACA,QAAIC,cAAc,EAAlB;;AAEAF,WAAOb,SAAP,GAAmB,aAAK;AACrB,YAAIgB,QAAQxB,EAAEC,MAAF,CAASC,MAArB;AACA,YAAGsB,KAAH,EAAS;AACL,gBAAIC,OAAOD,MAAME,KAAjB;AACAH,wBAAYI,IAAZ,CAAiB,IAAIX,UAAJ,CAAeS,KAAKG,KAApB,EAA0BH,KAAKI,WAA/B,EAA2CJ,KAAKK,MAAhD,CAAjB;AACAN,kBAAMO,QAAN;AACH,SAJD,MAIM;AACFlC,oBAAQC,GAAR,CAAYyB,WAAZ;AACH;AACH,KATD;;AAWAF,WAAOZ,OAAP,GAAiB,aAAK;AAClBZ,gBAAQa,KAAR,CAAcV,EAAEC,MAAF,CAASS,KAAT,CAAesB,IAA7B;AACH,KAFD;AAGH,CApBD","file":"indexedDB.js","sourcesContent":["var openRequest = window.indexedDB.open('bancoDados',3);\r\nvar connection;\r\n\r\nopenRequest.onupgradeneeded = e => {\r\n    console.log(\"Criando ou alterando um banco existente\");\r\n    let minhaConnection = e.target.result;\r\n\r\n    if (minhaConnection.objectStoreNames.contains('negociacoes')){\r\n        minhaConnection.deleteObjectStore('negociacoes')\r\n    }\r\n\r\n    minhaConnection.createObjectStore('negociacoes',{autoIncrement: true});\r\n}\r\n\r\nopenRequest.onsuccess = e=> {\r\n    connection = e.target.result;\r\n    //console.log(connection);\r\n}\r\n\r\nopenRequest.onerror = e=> {\r\n    console.log(e.target.error);\r\n}\r\n\r\nconst adiciona = () => {\r\n    let transaction = connection.transaction(['negociacoes'], 'readwrite');\r\n    let store = transaction.objectStore('negociacoes');\r\n    let negociacao = new Negociacao(new Date(),1,200);\r\n    let request = store.add(negociacao);\r\n    request.onsuccess = e => {\r\n        console.log('Negociação incluida')\r\n    };\r\n\r\n    request.onerror = e => {\r\n        console.log('Negociação não incluida')\r\n    }\r\n}\r\n\r\nconst listaDados = () => {\r\n    let transaction = connection.transaction(['negociacoes'], 'readwrite');\r\n    let store = transaction.objectStore('negociacoes');\r\n    let cursor = store.openCursor();\r\n    let negociacoes = [];\r\n\r\n    cursor.onsuccess = e => {\r\n       let atual = e.target.result;\r\n       if(atual){\r\n           var dado = atual.value;\r\n           negociacoes.push(new Negociacao(dado._data,dado._quantidade,dado._valor));\r\n           atual.continue();\r\n       }else {\r\n           console.log(negociacoes);\r\n       }\r\n    };\r\n\r\n    cursor.onerror = e => {\r\n        console.error(e.target.error.name);\r\n    };\r\n}"]}